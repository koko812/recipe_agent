# アプリ概要

## アプリ名（仮）
レシピ検索ミニアプリ

## コンセプト
- **冷蔵庫にある材料から作れるレシピを探す**ためのシンプルな検索アプリ。
- 「AIエージェント風の複雑な仕組み」に進む前に、**FastAPI + SQLite + Pydantic** という基礎的な組み合わせを実体験することを目的とした最小実装。
- 将来的には栄養価計算や材料ランキングなどに発展させる予定。

## 機能
1. **レシピ検索（/search）**
   - クエリ文字列を空白区切りで分解。
   - レシピタイトルや材料にすべて含まれているレシピを返す（AND検索）。
   - 検索結果はJSONで返却される。

2. **データ構造**
   - **recipesテーブル**
     - レシピの基本情報（id, title, url, 調理時間）。
   - **recipe_ingredientsテーブル**
     - 各レシピに紐づく材料（name, quantity, unit）。
   - 1対多の関係を利用して柔軟な検索が可能。

3. **API仕様**
   - `POST /search`
     - Request: `{"query":"鶏むね 長ねぎ"}`
     - Response:  
       ```json
       [
         {
           "id": 1,
           "title": "とりのねぎ塩炒め",
           "url": "https://example.com/negishio",
           "total_time_min": 10,
           "ingredients": [
             {"name":"鶏むね肉","quantity":200,"unit":"g"},
             {"name":"長ねぎ","quantity":1,"unit":"本"}
           ]
         }
       ]
       ```

4. **バリデーション**
   - Pydanticによる型チェックで入力・出力を保証。
   - 間違った型やJSON不正は自動で `422` エラー。

## 将来の拡張案
- **GET /search?q=材料名** に対応し、ブラウザから気軽に検索可能にする。
- **材料ベースのランキング**（例: 一番多く使われる食材TOP10）。
- **栄養価計算**（材料ごとにカロリー・タンパク質などを付与）。
- **簡易UI**（StreamlitやReactで検索フォーム＋結果表示）。
- **全文検索 (FTS5)** を導入して、日本語の検索精度を高める。

## 体験イメージ
- ユーザーが `"鶏むね 長ねぎ"` と入力すると、  
  → 「とりのねぎ塩炒め」が候補として返る。  
- `"卵"` と入力すると、  
  → 「長ねぎたっぷり親子丼」が返る。  
- 存在しない `"鶏わさ"` と入力すると、  
  → 空のリストが返ってくる。

---

